!function(e){var t={};function r(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(o,i,function(t){return e[t]}.bind(null,i));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){r(1),r(2),r(3),r(4),e.exports=r(5)},function(e,t){void 0!==AppDependencies&&AppDependencies.push("CustomerReviews"),angular.module("CustomerReviews",[]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("workspace.customerReviews",{url:"/customerReviews",templateUrl:"$(Platform)/Scripts/common/templates/home.tpl.html",controller:["$scope","platformWebApp.bladeNavigationService",function(e,t){t.showBlade({id:"reviewsList",controller:"CustomerReviews.reviewsListController",template:"Modules/$(CustomerReviews)/Scripts/blades/reviews-list.tpl.html",isClosingDisabled:!0})}]})}]).run(["platformWebApp.mainMenuService","platformWebApp.widgetService","$state",function(e,t,r){var o={path:"browse/customerReviews",icon:"fa fa-comments",title:"Customer Reviews",priority:100,action:function(){r.go("workspace.customerReviews")},permission:"customerReview:read"};e.addMenuItem(o);t.registerWidget({controller:"CustomerReviews.customerReviewWidgetController",template:"Modules/$(CustomerReviews)/Scripts/widgets/customerReviewWidget.tpl.html"},"itemDetail")}])},function(e,t){angular.module("CustomerReviews").controller("CustomerReviews.reviewsListController",["$scope","CustomerReviews.api","platformWebApp.bladeUtils","uiGridConstants","platformWebApp.uiGridHelper",function(e,t,r,o,i){e.uiGridConstants=o;var n=e.blade;r.bladeNavigationService;n.getSearchCriteria=function(){return angular.extend(s,{searchPhrase:s.keyword?s.keyword:void 0,sort:i.getSortExpression(e),skip:(e.pageSettings.currentPage-1)*e.pageSettings.itemsPerPageCount,take:e.pageSettings.itemsPerPageCount})},n.refresh=function(){n.isLoading=!0,t.search(n.getSearchCriteria(),(function(t){n.isLoading=!1,e.pageSettings.totalItems=t.totalCount,n.currentEntities=t.results}))},n.selectNode=function(e){},n.headIcon="fa-comments",n.toolbarCommands=[{name:"platform.commands.refresh",icon:"fa fa-refresh",executeMethod:n.refresh,canExecuteMethod:function(){return!0}}];var s=e.filter=n.filter||{};s.criteriaChanged=function(){e.pageSettings.currentPage>1?e.pageSettings.currentPage=1:n.refresh()},e.setGridOptions=function(t){i.initialize(e,t,(function(t){i.bindRefreshOnSortChanged(e)})),r.initializePagination(e.$parent)}}])},function(e,t){angular.module("CustomerReviews").factory("CustomerReviews.api",["$resource",function(e){return e("api/customerReviews",{},{search:{method:"POST",url:"api/customerReviews/search"},update:{method:"PUT"}})}])},function(e,t){angular.module("CustomerReviews").controller("CustomerReviews.customerReviewWidgetController",["$scope","CustomerReviews.api","platformWebApp.bladeNavigationService",function(e,t,r){var o=e.blade,i={take:0};e.openBlade=function(){if(!e.loading&&e.totalCount){var t={id:"reviewsList",filter:i,title:'Customer reviews for "'+o.title+'"',controller:"CustomerReviews.reviewsListController",template:"Modules/$(CustomerReviews)/Scripts/blades/reviews-list.tpl.html"};r.showBlade(t,o)}},e.$watch("blade.itemId",(function(r){i.productIds=[r],r&&(e.loading=!0,t.search(i,(function(t){e.loading=!1,e.totalCount=t.totalCount})))}))}])},function(e,t,r){}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9DdXN0b21lclJldmlld3Mvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vQ3VzdG9tZXJSZXZpZXdzLy4vU2NyaXB0cy9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vQ3VzdG9tZXJSZXZpZXdzLy4vU2NyaXB0cy9ibGFkZXMvcmV2aWV3cy1saXN0LmpzIiwid2VicGFjazovL0N1c3RvbWVyUmV2aWV3cy8uL1NjcmlwdHMvcmVzb3VyY2VzL0N1c3RvbWVyUmV2aWV3cy5XZWJBcGkuanMiLCJ3ZWJwYWNrOi8vQ3VzdG9tZXJSZXZpZXdzLy4vU2NyaXB0cy93aWRnZXRzL2N1c3RvbWVyUmV2aWV3V2lkZ2V0LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwidW5kZWZpbmVkIiwiQXBwRGVwZW5kZW5jaWVzIiwicHVzaCIsImFuZ3VsYXIiLCJjb25maWciLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsInN0YXRlIiwidXJsIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwiJHNjb3BlIiwiYmxhZGVOYXZpZ2F0aW9uU2VydmljZSIsInNob3dCbGFkZSIsImlkIiwidGVtcGxhdGUiLCJpc0Nsb3NpbmdEaXNhYmxlZCIsInJ1biIsIm1haW5NZW51U2VydmljZSIsIndpZGdldFNlcnZpY2UiLCIkc3RhdGUiLCJtZW51SXRlbSIsInBhdGgiLCJpY29uIiwidGl0bGUiLCJwcmlvcml0eSIsImFjdGlvbiIsImdvIiwicGVybWlzc2lvbiIsImFkZE1lbnVJdGVtIiwicmVnaXN0ZXJXaWRnZXQiLCJyZXZpZXdzQXBpIiwiYmxhZGVVdGlscyIsInVpR3JpZENvbnN0YW50cyIsInVpR3JpZEhlbHBlciIsImJsYWRlIiwiZ2V0U2VhcmNoQ3JpdGVyaWEiLCJleHRlbmQiLCJmaWx0ZXIiLCJzZWFyY2hQaHJhc2UiLCJrZXl3b3JkIiwic29ydCIsImdldFNvcnRFeHByZXNzaW9uIiwic2tpcCIsInBhZ2VTZXR0aW5ncyIsImN1cnJlbnRQYWdlIiwiaXRlbXNQZXJQYWdlQ291bnQiLCJ0YWtlIiwicmVmcmVzaCIsImlzTG9hZGluZyIsInNlYXJjaCIsImRhdGEiLCJ0b3RhbEl0ZW1zIiwidG90YWxDb3VudCIsImN1cnJlbnRFbnRpdGllcyIsInJlc3VsdHMiLCJzZWxlY3ROb2RlIiwiaGVhZEljb24iLCJ0b29sYmFyQ29tbWFuZHMiLCJleGVjdXRlTWV0aG9kIiwiY2FuRXhlY3V0ZU1ldGhvZCIsImNyaXRlcmlhQ2hhbmdlZCIsInNldEdyaWRPcHRpb25zIiwiZ3JpZE9wdGlvbnMiLCJpbml0aWFsaXplIiwiZ3JpZEFwaSIsImJpbmRSZWZyZXNoT25Tb3J0Q2hhbmdlZCIsImluaXRpYWxpemVQYWdpbmF0aW9uIiwiJHBhcmVudCIsImZhY3RvcnkiLCIkcmVzb3VyY2UiLCJtZXRob2QiLCJ1cGRhdGUiLCJvcGVuQmxhZGUiLCJsb2FkaW5nIiwibmV3QmxhZGUiLCIkd2F0Y2giLCJwcm9kdWN0SWRzIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYs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QixFQUFZbkIsR0FDbkssSUFBSXVCLEVBQVF4QixFQUFPd0IsTUFDZkcsRUFBUyxDQUFFUyxLQUFNLEdBVXJCcEMsRUFBTzhELFVBQVksV0FDZixJQUFJOUQsRUFBTytELFNBQVkvRCxFQUFPMEMsV0FBOUIsQ0FHQSxJQUFJc0IsRUFBVyxDQUNYN0QsR0FBSSxjQUNKd0IsT0FBUUEsRUFDUmQsTUFBTyx5QkFBMkJXLEVBQU1YLE1BQVEsSUFDaERkLFdBQVksd0NBQ1pLLFNBQVUsbUVBRWRILEVBQXVCQyxVQUFVOEQsRUFBVXhDLEtBRy9DeEIsRUFBT2lFLE9BQU8sZ0JBQWdCLFNBQVU5RCxHQUNwQ3dCLEVBQU91QyxXQUFhLENBQUMvRCxHQUVqQkEsSUF4QkpILEVBQU8rRCxTQUFVLEVBQ2pCM0MsRUFBV21CLE9BQU9aLEdBQVEsU0FBVWEsR0FDaEN4QyxFQUFPK0QsU0FBVSxFQUNqQi9ELEVBQU8wQyxXQUFhRixFQUFLRSxzQiIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCIvL0NhbGwgdGhpcyB0byByZWdpc3RlciBvdXIgbW9kdWxlIHRvIG1haW4gYXBwbGljYXRpb25cclxudmFyIG1vZHVsZVRlbXBsYXRlTmFtZSA9IFwiQ3VzdG9tZXJSZXZpZXdzXCI7XHJcblxyXG5pZiAoQXBwRGVwZW5kZW5jaWVzICE9PSB1bmRlZmluZWQpIHtcclxuICAgIEFwcERlcGVuZGVuY2llcy5wdXNoKG1vZHVsZVRlbXBsYXRlTmFtZSk7XHJcbn1cclxuXHJcbmFuZ3VsYXIubW9kdWxlKG1vZHVsZVRlbXBsYXRlTmFtZSwgW10pXHJcbiAgICAuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCAnJHVybFJvdXRlclByb3ZpZGVyJyxcclxuICAgICAgICBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlcikge1xyXG4gICAgICAgICAgICAkc3RhdGVQcm92aWRlclxyXG4gICAgICAgICAgICAgICAgLnN0YXRlKCd3b3Jrc3BhY2UuY3VzdG9tZXJSZXZpZXdzJywge1xyXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9jdXN0b21lclJldmlld3MnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnJChQbGF0Zm9ybSkvU2NyaXB0cy9jb21tb24vdGVtcGxhdGVzL2hvbWUudHBsLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJyRzY29wZScsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlJywgZnVuY3Rpb24gKCRzY29wZSwgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAncmV2aWV3c0xpc3QnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdDdXN0b21lclJldmlld3MucmV2aWV3c0xpc3RDb250cm9sbGVyJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJ01vZHVsZXMvJChDdXN0b21lclJldmlld3MpL1NjcmlwdHMvYmxhZGVzL3Jldmlld3MtbGlzdC50cGwuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNDbG9zaW5nRGlzYWJsZWQ6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICBdKVxyXG4gICAgLnJ1bihbJ3BsYXRmb3JtV2ViQXBwLm1haW5NZW51U2VydmljZScsICdwbGF0Zm9ybVdlYkFwcC53aWRnZXRTZXJ2aWNlJywgJyRzdGF0ZScsXHJcbiAgICAgICAgZnVuY3Rpb24gKG1haW5NZW51U2VydmljZSwgd2lkZ2V0U2VydmljZSwgJHN0YXRlKSB7XHJcbiAgICAgICAgICAgIC8vUmVnaXN0ZXIgbW9kdWxlIGluIG1haW4gbWVudVxyXG4gICAgICAgICAgICB2YXIgbWVudUl0ZW0gPSB7XHJcbiAgICAgICAgICAgICAgICBwYXRoOiAnYnJvd3NlL2N1c3RvbWVyUmV2aWV3cycsXHJcbiAgICAgICAgICAgICAgICBpY29uOiAnZmEgZmEtY29tbWVudHMnLFxyXG4gICAgICAgICAgICAgICAgdGl0bGU6ICdDdXN0b21lciBSZXZpZXdzJyxcclxuICAgICAgICAgICAgICAgIHByaW9yaXR5OiAxMDAsXHJcbiAgICAgICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uICgpIHsgJHN0YXRlLmdvKCd3b3Jrc3BhY2UuY3VzdG9tZXJSZXZpZXdzJykgfSxcclxuICAgICAgICAgICAgICAgIHBlcm1pc3Npb246ICdjdXN0b21lclJldmlldzpyZWFkJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBtYWluTWVudVNlcnZpY2UuYWRkTWVudUl0ZW0obWVudUl0ZW0pO1xyXG5cclxuICAgICAgICAgICAgLy9SZWdpc3RlciByZXZpZXdzIHdpZGdldCBpbnNpZGUgcHJvZHVjdCBibGFkZVxyXG4gICAgICAgICAgICB2YXIgaXRlbVJldmlld3NXaWRnZXQgPSB7XHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnQ3VzdG9tZXJSZXZpZXdzLmN1c3RvbWVyUmV2aWV3V2lkZ2V0Q29udHJvbGxlcicsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJ01vZHVsZXMvJChDdXN0b21lclJldmlld3MpL1NjcmlwdHMvd2lkZ2V0cy9jdXN0b21lclJldmlld1dpZGdldC50cGwuaHRtbCdcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgd2lkZ2V0U2VydmljZS5yZWdpc3RlcldpZGdldChpdGVtUmV2aWV3c1dpZGdldCwgJ2l0ZW1EZXRhaWwnKTtcclxuICAgICAgICB9XHJcbiAgICBdKTsiLCJhbmd1bGFyLm1vZHVsZSgnQ3VzdG9tZXJSZXZpZXdzJylcclxuICAgIC5jb250cm9sbGVyKCdDdXN0b21lclJldmlld3MucmV2aWV3c0xpc3RDb250cm9sbGVyJywgWyckc2NvcGUnLCAnQ3VzdG9tZXJSZXZpZXdzLmFwaScsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZVV0aWxzJywgJ3VpR3JpZENvbnN0YW50cycsICdwbGF0Zm9ybVdlYkFwcC51aUdyaWRIZWxwZXInLFxyXG4gICAgICAgIGZ1bmN0aW9uICgkc2NvcGUsIHJldmlld3NBcGksIGJsYWRlVXRpbHMsIHVpR3JpZENvbnN0YW50cywgdWlHcmlkSGVscGVyKSB7XHJcbiAgICAgICAgICAgICRzY29wZS51aUdyaWRDb25zdGFudHMgPSB1aUdyaWRDb25zdGFudHM7XHJcblxyXG4gICAgICAgICAgICB2YXIgYmxhZGUgPSAkc2NvcGUuYmxhZGU7XHJcbiAgICAgICAgICAgIHZhciBibGFkZU5hdmlnYXRpb25TZXJ2aWNlID0gYmxhZGVVdGlscy5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlO1xyXG5cclxuICAgICAgICAgICAgYmxhZGUuZ2V0U2VhcmNoQ3JpdGVyaWEgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYW5ndWxhci5leHRlbmQoZmlsdGVyLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VhcmNoUGhyYXNlOiBmaWx0ZXIua2V5d29yZCA/IGZpbHRlci5rZXl3b3JkIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgIHNvcnQ6IHVpR3JpZEhlbHBlci5nZXRTb3J0RXhwcmVzc2lvbigkc2NvcGUpLFxyXG4gICAgICAgICAgICAgICAgICAgIHNraXA6ICgkc2NvcGUucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlIC0gMSkgKiAkc2NvcGUucGFnZVNldHRpbmdzLml0ZW1zUGVyUGFnZUNvdW50LFxyXG4gICAgICAgICAgICAgICAgICAgIHRha2U6ICRzY29wZS5wYWdlU2V0dGluZ3MuaXRlbXNQZXJQYWdlQ291bnRcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgYmxhZGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICByZXZpZXdzQXBpLnNlYXJjaChibGFkZS5nZXRTZWFyY2hDcml0ZXJpYSgpLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wYWdlU2V0dGluZ3MudG90YWxJdGVtcyA9IGRhdGEudG90YWxDb3VudDtcclxuICAgICAgICAgICAgICAgICAgICBibGFkZS5jdXJyZW50RW50aXRpZXMgPSBkYXRhLnJlc3VsdHM7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGJsYWRlLnNlbGVjdE5vZGUgPSBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgLy8kc2NvcGUuc2VsZWN0ZWROb2RlSWQgPSBkYXRhLmlkO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vdmFyIG5ld0JsYWRlID0ge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgaWQ6ICdyZXZpZXdEZXRhaWxzJyxcclxuICAgICAgICAgICAgICAgIC8vICAgIGN1cnJlbnRFbnRpdHlJZDogZGF0YS5pZCxcclxuICAgICAgICAgICAgICAgIC8vICAgIGN1cnJlbnRFbnRpdHk6IGRhdGEsXHJcbiAgICAgICAgICAgICAgICAvLyAgICB0aXRsZTogZGF0YS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgLy8gICAgY29udHJvbGxlcjogJ3ZpcnRvQ29tbWVyY2Uuc3RvcmVNb2R1bGUuc3RvcmVEZXRhaWxDb250cm9sbGVyJyxcclxuICAgICAgICAgICAgICAgIC8vICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKFZpcnRvQ29tbWVyY2UuU3RvcmUpL1NjcmlwdHMvYmxhZGVzL3N0b3JlLWRldGFpbC50cGwuaHRtbCdcclxuICAgICAgICAgICAgICAgIC8vfTtcclxuICAgICAgICAgICAgICAgIC8vYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8vZnVuY3Rpb24gb3BlbkJsYWRlTmV3KCkge1xyXG4gICAgICAgICAgICAvLyAgICAkc2NvcGUuc2VsZWN0ZWROb2RlSWQgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgLy8gICAgdmFyIG5ld0JsYWRlID0ge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgaWQ6ICdzdG9yZURldGFpbHMnLFxyXG4gICAgICAgICAgICAvLyAgICAgICAgY3VycmVudEVudGl0eToge30sXHJcbiAgICAgICAgICAgIC8vICAgICAgICB0aXRsZTogJ3N0b3Jlcy5ibGFkZXMubmV3LXN0b3JlLXdpemFyZC50aXRsZScsXHJcbiAgICAgICAgICAgIC8vICAgICAgICBzdWJ0aXRsZTogJ3N0b3Jlcy5ibGFkZXMubmV3LXN0b3JlLXdpemFyZC5zdWJ0aXRsZScsXHJcbiAgICAgICAgICAgIC8vICAgICAgICBjb250cm9sbGVyOiAndmlydG9Db21tZXJjZS5zdG9yZU1vZHVsZS5uZXdTdG9yZVdpemFyZENvbnRyb2xsZXInLFxyXG4gICAgICAgICAgICAvLyAgICAgICAgdGVtcGxhdGU6ICdNb2R1bGVzLyQoVmlydG9Db21tZXJjZS5TdG9yZSkvU2NyaXB0cy93aXphcmRzL25ld1N0b3JlL25ldy1zdG9yZS13aXphcmQudHBsLmh0bWwnXHJcbiAgICAgICAgICAgIC8vICAgIH07XHJcbiAgICAgICAgICAgIC8vICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2hvd0JsYWRlKG5ld0JsYWRlLCBibGFkZSk7XHJcbiAgICAgICAgICAgIC8vfVxyXG5cclxuICAgICAgICAgICAgYmxhZGUuaGVhZEljb24gPSAnZmEtY29tbWVudHMnO1xyXG5cclxuICAgICAgICAgICAgYmxhZGUudG9vbGJhckNvbW1hbmRzID0gW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMucmVmcmVzaFwiLCBpY29uOiAnZmEgZmEtcmVmcmVzaCcsXHJcbiAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZU1ldGhvZDogYmxhZGUucmVmcmVzaCxcclxuICAgICAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8ve1xyXG4gICAgICAgICAgICAgICAgLy8gICAgbmFtZTogXCJwbGF0Zm9ybS5jb21tYW5kcy5hZGRcIiwgaWNvbjogJ2ZhIGZhLXBsdXMnLFxyXG4gICAgICAgICAgICAgICAgLy8gICAgZXhlY3V0ZU1ldGhvZDogb3BlbkJsYWRlTmV3LFxyXG4gICAgICAgICAgICAgICAgLy8gICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgfSxcclxuICAgICAgICAgICAgICAgIC8vICAgIHBlcm1pc3Npb246ICdzdG9yZTpjcmVhdGUnXHJcbiAgICAgICAgICAgICAgICAvL31cclxuICAgICAgICAgICAgXTtcclxuXHJcbiAgICAgICAgICAgIC8vIHNpbXBsZSBhbmQgYWR2YW5jZWQgZmlsdGVyaW5nXHJcbiAgICAgICAgICAgIHZhciBmaWx0ZXIgPSAkc2NvcGUuZmlsdGVyID0gYmxhZGUuZmlsdGVyIHx8IHt9O1xyXG5cclxuICAgICAgICAgICAgZmlsdGVyLmNyaXRlcmlhQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlID4gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wYWdlU2V0dGluZ3MuY3VycmVudFBhZ2UgPSAxO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBibGFkZS5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvLyB1aS1ncmlkXHJcbiAgICAgICAgICAgICRzY29wZS5zZXRHcmlkT3B0aW9ucyA9IGZ1bmN0aW9uIChncmlkT3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgdWlHcmlkSGVscGVyLmluaXRpYWxpemUoJHNjb3BlLCBncmlkT3B0aW9ucywgZnVuY3Rpb24gKGdyaWRBcGkpIHtcclxuICAgICAgICAgICAgICAgICAgICB1aUdyaWRIZWxwZXIuYmluZFJlZnJlc2hPblNvcnRDaGFuZ2VkKCRzY29wZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGJsYWRlVXRpbHMuaW5pdGlhbGl6ZVBhZ2luYXRpb24oJHNjb3BlLiRwYXJlbnQpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICB9XSk7IiwiYW5ndWxhci5tb2R1bGUoJ0N1c3RvbWVyUmV2aWV3cycpXHJcbiAgICAuZmFjdG9yeSgnQ3VzdG9tZXJSZXZpZXdzLmFwaScsIFsnJHJlc291cmNlJywgZnVuY3Rpb24gKCRyZXNvdXJjZSkge1xyXG4gICAgICAgIHJldHVybiAkcmVzb3VyY2UoJ2FwaS9jdXN0b21lclJldmlld3MnLCB7fSwge1xyXG4gICAgICAgICAgICBzZWFyY2g6IHsgbWV0aG9kOiAnUE9TVCcsIHVybDogJ2FwaS9jdXN0b21lclJldmlld3Mvc2VhcmNoJyB9LFxyXG4gICAgICAgICAgICB1cGRhdGU6IHsgbWV0aG9kOiAnUFVUJyB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XSk7Iiwi77u/YW5ndWxhci5tb2R1bGUoJ0N1c3RvbWVyUmV2aWV3cycpXHJcbiAgICAuY29udHJvbGxlcignQ3VzdG9tZXJSZXZpZXdzLmN1c3RvbWVyUmV2aWV3V2lkZ2V0Q29udHJvbGxlcicsIFsnJHNjb3BlJywgJ0N1c3RvbWVyUmV2aWV3cy5hcGknLCAncGxhdGZvcm1XZWJBcHAuYmxhZGVOYXZpZ2F0aW9uU2VydmljZScsIGZ1bmN0aW9uICgkc2NvcGUsIHJldmlld3NBcGksIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UpIHtcclxuICAgICAgICB2YXIgYmxhZGUgPSAkc2NvcGUuYmxhZGU7XHJcbiAgICAgICAgdmFyIGZpbHRlciA9IHsgdGFrZTogMCB9O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiByZWZyZXNoKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUubG9hZGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgIHJldmlld3NBcGkuc2VhcmNoKGZpbHRlciwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUudG90YWxDb3VudCA9IGRhdGEudG90YWxDb3VudDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkc2NvcGUub3BlbkJsYWRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoJHNjb3BlLmxvYWRpbmcgfHwgISRzY29wZS50b3RhbENvdW50KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xyXG4gICAgICAgICAgICAgICAgaWQ6IFwicmV2aWV3c0xpc3RcIixcclxuICAgICAgICAgICAgICAgIGZpbHRlcjogZmlsdGVyLFxyXG4gICAgICAgICAgICAgICAgdGl0bGU6ICdDdXN0b21lciByZXZpZXdzIGZvciBcIicgKyBibGFkZS50aXRsZSArICdcIicsXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnQ3VzdG9tZXJSZXZpZXdzLnJldmlld3NMaXN0Q29udHJvbGxlcicsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJ01vZHVsZXMvJChDdXN0b21lclJldmlld3MpL1NjcmlwdHMvYmxhZGVzL3Jldmlld3MtbGlzdC50cGwuaHRtbCdcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuJHdhdGNoKFwiYmxhZGUuaXRlbUlkXCIsIGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgICAgICBmaWx0ZXIucHJvZHVjdElkcyA9IFtpZF07XHJcblxyXG4gICAgICAgICAgICBpZiAoaWQpIHJlZnJlc2goKTtcclxuICAgICAgICB9KTtcclxuICAgIH1dKTsiXSwic291cmNlUm9vdCI6IiJ9